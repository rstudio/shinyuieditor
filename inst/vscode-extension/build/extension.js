"use strict";var Ge=Object.create;var G=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var We=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var He=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),Ke=(o,e)=>{for(var t in e)G(o,t,{get:e[t],enumerable:!0})},J=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Be(e))!$e.call(o,n)&&n!==t&&G(o,n,{get:()=>e[n],enumerable:!(r=Fe(e,n))||r.enumerable});return o};var P=(o,e,t)=>(t=o!=null?Ge(We(o)):{},J(e||!o||!o.__esModule?G(t,"default",{value:o,enumerable:!0}):t,o)),je=o=>J(G({},"__esModule",{value:!0}),o);var ve=He((gt,Ee)=>{var V=require("util"),Qe=require("path"),A=require("child_process").spawn,y=function(){},Q="HKLM",re="HKCU",ne="HKCR",ie="HKU",se="HKCC",ae=[Q,re,ne,ie,se],ce="REG_SZ",ue="REG_MULTI_SZ",pe="REG_EXPAND_SZ",le="REG_DWORD",de="REG_QWORD",fe="REG_BINARY",me="REG_NONE",he=[ce,ue,pe,le,de,fe,me],Ze="",qe=/(\\[a-zA-Z0-9_\s]+)*/,Je=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,ge=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function M(o,e){if(!(this instanceof M))return new M(o,e);Error.captureStackTrace(this,M),this.__defineGetter__("name",function(){return M.name}),this.__defineGetter__("message",function(){return o}),this.__defineGetter__("code",function(){return e})}V.inherits(M,Error);function C(o){var e={stdout:"",stderr:""};return o.stdout.on("data",function(t){e.stdout+=t.toString()}),o.stderr.on("data",function(t){e.stderr+=t.toString()}),e}function U(o,e,t){var r=t.stdout.trim(),n=t.stderr.trim(),i=V.format(`%s command exited with code %d:
%s
%s`,o,e,r,n);return new M(i,e)}function Xe(o){if(o=="x64")return"64";if(o=="x86")return"32";throw new Error("illegal architecture: "+o+" (use x86 or x64)")}function O(o,e){e&&o.push("/reg:"+Xe(e))}function k(){return process.platform==="win32"?Qe.join(process.env.windir,"system32","reg.exe"):"REG"}function I(o,e,t,r,n,i,s){if(!(this instanceof I))return new I(o,e,t,r,n,i,s);var a=o,c=e,u=t,f=r,l=n,g=i,p=s;this.__defineGetter__("host",function(){return a}),this.__defineGetter__("hive",function(){return c}),this.__defineGetter__("key",function(){return u}),this.__defineGetter__("name",function(){return f}),this.__defineGetter__("type",function(){return l}),this.__defineGetter__("value",function(){return g}),this.__defineGetter__("arch",function(){return p})}V.inherits(I,Object);function d(o){if(!(this instanceof d))return new d(o);var e=o||{},t=""+(e.host||""),r=""+(e.hive||Q),n=""+(e.key||""),i=e.arch||null;if(this.__defineGetter__("host",function(){return t}),this.__defineGetter__("hive",function(){return r}),this.__defineGetter__("key",function(){return n}),this.__defineGetter__("path",function(){return(t.length==0?"":"\\\\"+t+"\\")+r+n}),this.__defineGetter__("arch",function(){return i}),this.__defineGetter__("parent",function(){var s=n.lastIndexOf("\\");return new d({host:this.host,hive:this.hive,key:s==-1?"":n.substring(0,s),arch:this.arch})}),ae.indexOf(r)==-1)throw new Error("illegal hive specified.");if(!qe.test(n))throw new Error("illegal key specified.");if(i&&i!="x64"&&i!="x86")throw new Error("illegal architecture specified (use x86 or x64)")}d.HKLM=Q;d.HKCU=re;d.HKCR=ne;d.HKU=ie;d.HKCC=se;d.HIVES=ae;d.REG_SZ=ce;d.REG_MULTI_SZ=ue;d.REG_EXPAND_SZ=pe;d.REG_DWORD=le;d.REG_QWORD=de;d.REG_BINARY=fe;d.REG_NONE=me;d.REG_TYPES=he;d.DEFAULT_VALUE=Ze;d.prototype.values=function(e){if(typeof e!="function")throw new TypeError("must specify a callback");var t=["QUERY",this.path];O(t,this.arch);var r=A(k(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),n="",i=this,s=null,a=C(r);return r.on("close",function(c){if(!s)if(c!==0)y("process exited with code "+c),e(U("QUERY",c,a),null);else{for(var u=[],f=[],l=n.split(`
`),g=0,p=0,m=l.length;p<m;p++){var v=l[p].trim();v.length>0&&(y(v),g!=0&&u.push(v),++g)}for(var p=0,m=u.length;p<m;p++){var h=ge.exec(u[p]),R,w,E;h&&(R=h[1].trim(),w=h[2].trim(),E=h[3],f.push(new I(i.host,i.hive,i.key,R,w,E,i.arch)))}e(null,f)}}),r.stdout.on("data",function(c){n+=c.toString()}),r.on("error",function(c){s=c,e(c)}),this};d.prototype.keys=function(e){if(typeof e!="function")throw new TypeError("must specify a callback");var t=["QUERY",this.path];O(t,this.arch);var r=A(k(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),n="",i=this,s=null,a=C(r);return r.on("close",function(c){s||c!==0&&(y("process exited with code "+c),e(U("QUERY",c,a),null))}),r.stdout.on("data",function(c){n+=c.toString()}),r.stdout.on("end",function(){for(var c=[],u=[],f=n.split(`
`),l=0,g=f.length;l<g;l++){var p=f[l].trim();p.length>0&&(y(p),c.push(p))}for(var l=0,g=c.length;l<g;l++){var m=Je.exec(c[l]),v,h;m&&(v=m[1],h=m[2],h&&h!==i.key&&u.push(new d({host:i.host,hive:i.hive,key:h,arch:i.arch})))}e(null,u)}),r.on("error",function(c){s=c,e(c)}),this};d.prototype.get=function(e,t){if(typeof t!="function")throw new TypeError("must specify a callback");var r=["QUERY",this.path];e==""?r.push("/ve"):r=r.concat(["/v",e]),O(r,this.arch);var n=A(k(),r,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",s=this,a=null,c=C(n);return n.on("close",function(u){if(!a)if(u!==0)y("process exited with code "+u),t(U("QUERY",u,c),null);else{for(var f=[],l=null,g=i.split(`
`),p=0,m=0,v=g.length;m<v;m++){var h=g[m].trim();h.length>0&&(y(h),p!=0&&f.push(h),++p)}var R=f[f.length-1]||"",w=ge.exec(R),E,T,S;w&&(E=w[1].trim(),T=w[2].trim(),S=w[3],l=new I(s.host,s.hive,s.key,E,T,S,s.arch)),t(null,l)}}),n.stdout.on("data",function(u){i+=u.toString()}),n.on("error",function(u){a=u,t(u)}),this};d.prototype.set=function(e,t,r,n){if(typeof n!="function")throw new TypeError("must specify a callback");if(he.indexOf(t)==-1)throw Error("illegal type specified.");var i=["ADD",this.path];e==""?i.push("/ve"):i=i.concat(["/v",e]),i=i.concat(["/t",t,"/d",r,"/f"]),O(i,this.arch);var s=A(k(),i,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),a=null,c=C(s);return s.on("close",function(u){a||(u!==0?(y("process exited with code "+u),n(U("ADD",u,c,null))):n(null))}),s.stdout.on("data",function(u){y(""+u)}),s.on("error",function(u){a=u,n(u)}),this};d.prototype.remove=function(e,t){if(typeof t!="function")throw new TypeError("must specify a callback");var r=e?["DELETE",this.path,"/f","/v",e]:["DELETE",this.path,"/f","/ve"];O(r,this.arch);var n=A(k(),r,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,s=C(n);return n.on("close",function(a){i||(a!==0?(y("process exited with code "+a),t(U("DELETE",a,s),null)):t(null))}),n.stdout.on("data",function(a){y(""+a)}),n.on("error",function(a){i=a,t(a)}),this};d.prototype.clear=function(e){if(typeof e!="function")throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f","/va"];O(t,this.arch);var r=A(k(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),n=null,i=C(r);return r.on("close",function(s){n||(s!==0?(y("process exited with code "+s),e(U("DELETE",s,i),null)):e(null))}),r.stdout.on("data",function(s){y(""+s)}),r.on("error",function(s){n=s,e(s)}),this};d.prototype.erase=d.prototype.clear;d.prototype.destroy=function(e){if(typeof e!="function")throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f"];O(t,this.arch);var r=A(k(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),n=null,i=C(r);return r.on("close",function(s){n||(s!==0?(y("process exited with code "+s),e(U("DELETE",s,i),null)):e(null))}),r.stdout.on("data",function(s){y(""+s)}),r.on("error",function(s){n=s,e(s)}),this};d.prototype.create=function(e){if(typeof e!="function")throw new TypeError("must specify a callback");var t=["ADD",this.path,"/f"];O(t,this.arch);var r=A(k(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),n=null,i=C(r);return r.on("close",function(s){n||(s!==0?(y("process exited with code "+s),e(U("ADD",s,i),null)):e(null))}),r.stdout.on("data",function(s){y(""+s)}),r.on("error",function(s){n=s,e(s)}),this};d.prototype.keyExists=function(e){return this.values(function(t,r){if(t)return t.code==1?e(null,!1):e(t);e(null,!0)}),this};d.prototype.valueExists=function(e,t){return this.get(e,function(r,n){if(r)return r.code==1?t(null,!1):t(r);t(null,!0)}),this};Ee.exports=d});var ct={};Ke(ct,{activate:()=>at});module.exports=je(ct);var D=P(require("vscode"));function Ye(o){return typeof o=="object"&&o!==null}function X(o){return Ye(o)?"path"in o:!1}var z=Ve;function Ve(o,e,t){var r=null,n=null,i=function(){r&&(clearTimeout(r),n=null,r=null)},s=function(){var c=n;i(),c&&c()},a=function(){if(!e)return o.apply(this,arguments);var c=this,u=arguments,f=t&&!r;if(i(),n=function(){o.apply(c,u)},r=setTimeout(function(){if(r=null,!f){var l=n;return n=null,l()}},e),f)return n()};return a.cancel=i,a.flush=s,a}var q=P(require("vscode"));var x=P(require("vscode"));async function F({text:o,document:e,uiBounds:t={start:0,end:0},type:r}){let n=e.uri,i=new x.WorkspaceEdit;if(r==="replace"){let s=new x.Range(t.start-1,0,t.end,0);i.replace(n,s,o)}r==="insert"&&i.insert(e.uri,new x.Position(0,0),o),await x.workspace.applyEdit(i),e.save()}var b=P(require("vscode"));async function ee(o){let e=o.uri,t=new b.WorkspaceEdit,r=o.validateRange(new b.Range(0,0,1/0,1/0));t.replace(e,r,""),await b.workspace.applyEdit(t),o.save()}var B=P(require("vscode"));async function te(o){return await B.window.showTextDocument(o.uri,{viewColumn:B.ViewColumn.Beside})}var _e=require("child_process");var Re=require("fs"),Z=P(require("path")),W=P(require("vscode"));function _(...o){return o.filter(t=>t!==void 0).reduce((t,r,n)=>(n===0?"":t+`
`)+r,"")}function N(o){return o.replace(/"/g,'\\"')}function oe(o){return o.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var ye=ve();function ze(o){let e=":",t="";o==="win32"&&(e=";",t=".exe");let r=process.env.PATH?process.env.PATH.split(e):[];for(let n of r){let i=Z.default.join(n,"R"+t);if((0,Re.existsSync)(i))return i}return""}async function et(){let o=process.platform,e=ze(o);if(!e&&o==="win32")try{let t=new ye({hive:ye.HKLM,key:"\\Software\\R-Core\\R"}),r=await new Promise((n,i)=>t.get("InstallPath",(s,a)=>s===null?n(a):i(s)));e=Z.default.join(r.value,"bin","R.exe")}catch{e=""}return e}function tt(){return`rpath.${process.platform==="win32"?"windows":process.platform==="darwin"?"mac":"linux"}`}async function Te(){let o=tt(),e=W.workspace.getConfiguration("r").get(o);return e||(e=await et()),e||W.window.showErrorMessage(`Cannot find R for running shinyuieditor. Make sure R is installed and/or updating the r.${o} config option to proper to R path.`),oe(e)}async function $(o,e={}){let t=await Te();if(t===void 0)throw new Error("Can't get R path");let r="";return new Promise(n=>{var w;let i=new AbortController,{signal:s}=i,a=(0,_e.spawn)(t,o,{signal:s});a.on("spawn",f),a.on("error",l),a.on("close",g),a.stdout.on("data",p),a.stderr.on("data",m);function c(E,T){r+=`${E}: ${T}`}function u(E){!e.verbose||console.log(`%c[RProc ${a.pid}] %c${E.replaceAll(/\n$/g,"").replaceAll(/\n/g,`
\u2219\u2219\u2219 `)}`,"color: orangered;","color: grey; opacity: 0.5")}function f(){u("spawned"),clearTimeout(R),n({proc:a,stop:h})}function l(E){var T;u(`Error: 
${E.toString()}`),clearTimeout(R),(T=e.onError)==null||T.call(e,E)}function g(){var E;u("Closed"),clearTimeout(R),(E=e.onClose)==null||E.call(e)}function p(E){var S;let T=E.toString();u(`stdout: 
${T}`),c("out",T),(S=e.onStdout)==null||S.call(e,T)}function m(E){var S;let T=E.toString();u(`stderr: ${T}`),c("error",T),(S=e.onStderr)==null||S.call(e,T)}function v(){a.off("spawn",f),a.off("error",l),a.off("close",g),a.stdout.off("data",p),a.stderr.off("data",m)}function h(){return v(),!a.pid||!a.connected?!0:(u(`Killing R process ${a.pid}`),process.kill(a.pid))}let R=setTimeout(()=>{throw h(),new Error(`Starting backend server failed.
 Logs:
`+r)},(w=e.timeout_ms)!=null?w:5e3)})}async function we(){let o=await $(["--silent","--slave","--no-save","--no-restore"],{timeout_ms:5e3});return{...o,runCmd:(e,t)=>H(o.proc,e,t)}}function Pe(o,e){e.stdin.write(`${o}
`)}var Se="SUE_START_SIGNAL",xe="SUE_END_SIGNAL";function ot(o,e){return t=>{o&&console.log(e+t)}}async function H(o,e,{timeout_ms:t=1e3,verbose:r=!1}={}){let n=ot(r,"runRCommand: "),i="",s=!1,a=!1,c=[];return new Promise(u=>{function f(m){let h=m.toString().split(`
`);n("~~~Output chunk~~~");for(let R of h){if(i+=R+`
`,n(R),R.includes(Se)){a=!0;continue}if(!!a&&!(!s&&R.length===0)){if(R.includes(xe)){clearTimeout(p),u(c),n("Output finished"),g();break}s=!0,c.push(R)}}}function l(m){n("stderr: "+m.toString())}function g(){o.stdout.off("data",f),o.stderr.off("data",l)}o.stdout.on("data",f),o.stderr.on("data",l);let p=setTimeout(()=>{throw g(),new Error(`Timeout, no response from run command within ${t}ms: ${e}
 Logs:
 ${i}`)},t);Pe(`print('${Se}');${e};print('${xe}')`,o)})}async function Ae(o,e){return(await H(o.proc,`print(require(${e}, quietly = TRUE))`,{verbose:!1}))[0].includes("FALSE")?{status:"error",msg:rt(e)}:{status:"success"}}function rt(o){return`The ShinyUiEditor extension needs the \`${o}\` pkg installed. Install using \`remotes::install_github('rstudio/${o}')\` and restart the extension.`}async function Ce(o,e,t){return(await o.runCmd(`styler::style_text("${N(e)}", scope = "tokens")`,t)).reduce((n,i)=>n+`
`+i,"")}async function K(o,e){let t=nt(o);try{let r=await e.runCmd(t,{verbose:!1});return JSON.parse(_(...r))}catch{throw new Error("Failed to generate new ui code from tree")}}function nt(o,e=!0){let t=N(JSON.stringify(o,null,2)),r=e?"TRUE":"FALSE";return _("ui_tree <- jsonlite::fromJSON(",`  txt = "${t}",`,"  simplifyVector = FALSE",")",`new_ui_code <- shinyuieditor:::ui_tree_to_code(ui_tree, remove_namespace = ${r})`,"new_ui_code$text <- as.character(new_ui_code$text)","jsonlite::toJSON(new_ui_code, auto_unbox = TRUE)")}async function Ue(o,{uiTree:e,otherCode:{uiExtra:t,serverFunctionBody:r,serverExtra:n,serverLibraries:i}}){let{text:s,namespaces_removed:a}=await K(e,o),u=[...new Set([...i!=null?i:[],...a])].map(m=>`library(${m})`),f=["server <- function(input, output) {",r,"}"],l="ui <- "+_(...s),g=_(...u,t,"",l,"",n,"",...f,"","shinyApp(ui, server)");return await Ce(o,g)}async function Oe(o,e){let t=it(o),r=await e.runCmd(t);try{let n=JSON.parse(r.reduce((i,s)=>i+`
`+s,""));return Object.keys(n).length===0?"EMPTY":n}catch{throw new Error("Could not get document as json. Content is not valid json")}}function it(o){let e=N(o);return _(`app_lines <- strsplit("${e}", "\\n")[[1]]`,"jsonlite::toJSON(",'  shinyuieditor:::get_file_ui_definition_info(app_lines, "single-file"),',"  auto_unbox = TRUE",")")}var be=P(require("path")),j=P(require("vscode"));var ke=P(require("net"));async function De(){return new Promise(o=>{let e=ke.default.createServer();e.listen(0,()=>{var r;let t=(r=e.address)==null?void 0:r.call(e);if(typeof t=="string"||t===null)throw new Error("Failed to find a free port...");e.close(n=>o(t.port))})})}function Ne({pathToApp:o,onCrash:e,onInitiation:t,onReady:r,onFailToStart:n,onLogs:i}){let s="0.0.0.0",a=be.default.parse(o).dir,c=null;async function u(){t(),f();try{let l=await De(),g=await j.env.asExternalUri(j.Uri.parse(`http://localhost:${l}`)),p=new RegExp(`listening on .+${l}`,"i"),m=_("options(shiny.autoreload = TRUE)",`shiny::runApp(appDir = "${a}", port = ${l}, host = "${s}")`);return c=await $(["--no-save","--no-restore","--silent","-e",m],{onStderr(v){p.test(v)&&r(g.toString()),i(v.split(`
`))},onClose:e,onError:e}),!0}catch{return n(),!1}}function f(){return c===null?!0:c.stop()}return{start:u,stop:f}}async function Me({document:o,uiBounds:e,RProcess:t,uiTree:r}){if(!e)throw new Error("Attempting to update an app that has yet to be parsed.");let{start:n,end:i}=e,s=await K(r,t),a=`ui <- ${_(...s.text)}
`;await F({text:a,document:o,uiBounds:e,type:"replace"});let c=i-n+1,f=s.text.length-c;return{uiText:a,uiBounds:{start:n,end:i+f}}}var{showErrorMessage:st}=q.window;function Ie({RProcess:o,document:e,sendMessage:t}){console.log("Starting up main editor logic function!");let r=!1,n=null,i,s=null,a=async()=>{let p=e.getText();if(n!==null&&p.includes(n))return;if(!r){let h=await Ae(o,"shinyuieditor");if(h.status==="error")throw t({path:"BACKEND-ERROR",payload:h.msg}),st(h.msg),new Error(h.msg);r=!0}let v=await Oe(p,o);if(v==="EMPTY")t({path:"TEMPLATE_CHOOSER",payload:"SINGLE-FILE"});else{let{ui_tree:h}=v;i=v.ui_bounds,t({path:"UPDATED-TREE",payload:h})}},c=z(a,500),u=()=>{c()},f=()=>{c.flush()},l=Ne({pathToApp:e.fileName,onInitiation:()=>{t({path:"APP-PREVIEW-STATUS",payload:"LOADING"})},onReady:p=>{t({path:"APP-PREVIEW-STATUS",payload:{url:p}})},onFailToStart:()=>{t({path:"APP-PREVIEW-CRASH",payload:"Failed to start"})},onCrash:()=>{t({path:"APP-PREVIEW-CRASH",payload:"Crashed"})},onLogs:p=>{t({path:"APP-PREVIEW-LOGS",payload:p})}});return{onDocumentChanged:u,onDocumentSaved:f,onDidReceiveMessage:async p=>{if(X(p))switch(p.path){case"READY-FOR-STATE":a(),t({path:"RUNTIME-TYPE",payload:"VSCODE"});return;case"TEMPLATE-SELECTION":{let m=await Ue(o,p.payload);await F({text:m,document:e,type:"insert",uiBounds:i});return}case"UPDATED-TREE":{let m=await Me({document:e,uiBounds:i,RProcess:o,uiTree:p.payload});n=m.uiText,i=m.uiBounds;return}case"APP-PREVIEW-REQUEST":{l.start();return}case"APP-PREVIEW-STOP":{l.stop();return}case"APP-PREVIEW-RESTART":{l.start();return}case"ENTERED-TEMPLATE-SELECTOR":{l.stop(),await ee(e);return}case"OPEN-COMPANION-EDITOR":{if(s&&q.window.visibleTextEditors.includes(s))return;s=await te(e);return}default:console.warn("Unhandled message from client",p)}else console.log("Unknown message from webview",p)}}}function Le(){let o="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<32;t++)o+=e.charAt(Math.floor(Math.random()*e.length));return o}var Y=class{constructor(e){this.context=e;this.RProcess=null;we().then(t=>{this.RProcess=t})}static register(e){let t=new Y(e);return D.window.registerCustomEditorProvider(Y.viewType,t,{webviewOptions:{retainContextWhenHidden:!0}})}async resolveCustomTextEditor(e,t,r){if(t.webview.options={enableScripts:!0},t.webview.html=this.getHtmlForWebview(t.webview),!this.RProcess)throw new Error("Don't have an R Process to pass to editor backend!");let n=Ie({RProcess:this.RProcess,document:e,sendMessage:c=>t.webview.postMessage(c)}),i=D.workspace.onDidChangeTextDocument(c=>{c.document.uri.toString()===e.uri.toString()&&n.onDocumentChanged()}),s=D.workspace.onDidSaveTextDocument(c=>{c.uri.toString()===e.uri.toString()&&n.onDocumentSaved()}),a=t.webview.onDidReceiveMessage(n.onDidReceiveMessage);t.onDidDispose(()=>{i.dispose(),s.dispose(),a.dispose()})}getHtmlForWebview(e){let t=e.asWebviewUri(D.Uri.joinPath(this.context.extensionUri,"media","build","bundle.js")),r=e.asWebviewUri(D.Uri.joinPath(this.context.extensionUri,"media","build","bundle.css")),n=Le(),i=e.cspSource;return`
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">
				<script>
				// This is needed for various older packages that require the global
				// object to be defined because it typically was with older bundlers like
				// webpack
				var global = window;
			  <\/script>
				<!--
				Use a content security policy to only allow loading images from https or from our extension directory,
				and only allow scripts that have a specific nonce.
				-->
				<meta 
          http-equiv="Content-Security-Policy" 
          content="default-src 'none'; frame-src http://localhost:*/ ${i} https:; img-src ${i} data:; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${n}';">

				<meta name="viewport" content="width=device-width, initial-scale=1.0">

				
				<link href="${r}" rel="stylesheet" />
				
				<title>Shiny UI Editor</title>
			</head>
			<body>
				<noscript>You need to enable JavaScript to run this app.</noscript>
				<div id="root" style="height: 100vh; display: relative"></div>
				<script nonce="${n}" src="${t}"><\/script>
			</body>
			</html>`}},L=Y;L.viewType="shinyUiEditor.appFile";function at(o){o.subscriptions.push(L.register(o))}0&&(module.exports={activate});
